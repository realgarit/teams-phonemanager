<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:teams_phonemanager"
             xmlns:converters="clr-namespace:teams_phonemanager.Converters"
             xmlns:fa="using:FluentAvalonia.Styling"
             xmlns:fi="using:FluentIcons.Avalonia"
             x:Class="teams_phonemanager.App"
             RequestedThemeVariant="Dark">
    <Application.Styles>
        <fa:FluentAvaloniaTheme />
        
        <!-- Global Control Styles -->
        <Style Selector="TextBox">
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style Selector="ComboBox">
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style Selector="ComboBox /template/ ContentPresenter#ContentPresenter">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style Selector="CalendarDatePicker">
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style Selector="NumericUpDown">
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style Selector="Border.card">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundFillColorDefaultBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16"/>
        </Style>
        
        <Style Selector="Border.dialog">
            <Setter Property="Background" Value="{DynamicResource SolidBackgroundFillColorBase}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16"/>
        </Style>
        
        <!-- Reusable Button Styles for Icon+Text patterns -->
        <Style Selector="Button.IconText">
            <Setter Property="Height" Value="40"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="12,0"/>
        </Style>
        
        <Style Selector="Button.IconTextLarge">
            <Setter Property="Height" Value="50"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="16,0"/>
        </Style>
        
        <!-- Centered Icon+Text Button (for Welcome page) -->
        <Style Selector="Button.IconTextCentered">
            <Setter Property="Height" Value="50"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="16,0"/>
        </Style>
        
        <!-- Icon Only Button (for Settings, etc.) -->
        <Style Selector="Button.IconOnly">
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="0"/>
        </Style>
        
        <!--
            Icon styles - Cross-platform vertical centering fix

            FluentIcons SymbolIcon renders as font glyphs. Font metrics (baseline, ascent, descent)
            cause visual misalignment across platforms because Avalonia centers mathematically
            rather than visually (known issue: https://github.com/AvaloniaUI/Avalonia/issues/10658).

            The fix: Use UseLayoutRounding and proper alignment. Do not set fixed Width/Height
            as icons may have custom FontSize values that need to scale naturally.
        -->

        <!-- Default: Standard icon with right margin for icon+text spacing -->
        <Style Selector="fi|SymbolIcon">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="UseLayoutRounding" Value="True"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>

        <!-- NavBar override: No right margin (uses StackPanel Spacing) -->
        <Style Selector="ListBoxItem fi|SymbolIcon">
            <Setter Property="Margin" Value="0"/>
        </Style>

        <!-- IconOnly override: No margin (centered in button) -->
        <Style Selector="Button.IconOnly fi|SymbolIcon">
            <Setter Property="Margin" Value="0"/>
        </Style>

        <!-- ════════════════════════════════════════════════
             Sidebar navigation ListBox / ListBoxItem styles
             ════════════════════════════════════════════════ -->
        <Style Selector="ListBox.nav">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0,4"/>
        </Style>
        <Style Selector="ListBox.nav ListBoxItem">
            <Setter Property="Padding" Value="12,9"/>
            <Setter Property="Margin" Value="0,1"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="BorderThickness" Value="2,0,0,0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
        </Style>
        <Style Selector="ListBox.nav ListBoxItem:selected">
            <Setter Property="BorderBrush" Value="{DynamicResource TeamsPrimaryBrush}"/>
        </Style>
        <Style Selector="ListBox.nav ListBoxItem:selected /template/ ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SubtleFillColorTertiaryBrush}"/>
        </Style>
        <Style Selector="ListBox.nav ListBoxItem:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SubtleFillColorSecondaryBrush}"/>
        </Style>

        <!-- ════════════════════════════════════
             Typography: page-title / section-title / hint
             ════════════════════════════════════ -->
        <!-- Large page title — use with TextBlock Classes="page-title" -->
        <Style Selector="TextBlock.page-title">
            <Setter Property="FontSize" Value="28"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>
        <!-- Section sub-heading — use with TextBlock Classes="section-title" -->
        <Style Selector="TextBlock.section-title">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>
        <!-- Small helper / hint text — use with TextBlock Classes="hint" -->
        <Style Selector="TextBlock.hint">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Opacity" Value="0.6"/>
            <Setter Property="Margin" Value="0,4,0,0"/>
        </Style>
        <!-- Dialog heading — use with TextBlock Classes="dialog-title" -->
        <Style Selector="TextBlock.dialog-title">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>
    </Application.Styles>
    
    <Application.Resources>
        <!-- Value Converters -->
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
        
        <!-- Note: Icon geometries removed - now using FluentIcons.Avalonia SymbolIcon -->

        <!-- Teams Violet Color Palette -->
        <SolidColorBrush x:Key="TeamsPrimaryBrush" Color="#6264A7"/>
        <SolidColorBrush x:Key="TeamsPrimaryLightBrush" Color="#8B8FC7"/>
        <SolidColorBrush x:Key="TeamsPrimaryDarkBrush" Color="#464775"/>
    </Application.Resources>
</Application>